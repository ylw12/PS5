library(foreign)
ANES <- read.dta("anes_timeseries_2012_stata12.dta")
ANESslected <- ANES[ , c("ft_dpc", "gender_respondent_x", "dem_raceeth_x", "interest_attention",
"prmedia_atinews", "prmedia_attvnews", "prmedia_atpprnews",
"prmedia_atrdnews", "presapp_track", "libcpre_self", "pid_self")]
# Name the columns in a better way.
colnames(ANESslected) <- c("Obama", "Gender", "Ethnicty", "Attention", "Internet", "TV",
"Newspaper", "Radio", "Direction", "Selfplacement", "PartyIdentity")
ANESslected[, c(2,3)] <- gsub("[[:digit:]]", "", ANESslected[, c(2,3)])
View(ANESslected)
ANES <- read.dta("anes_timeseries_2012_stata12.dta")
ANESslected <- ANES[ , c("ft_dpc", "gender_respondent_x", "dem_raceeth_x", "interest_attention",
"prmedia_atinews", "prmedia_attvnews", "prmedia_atpprnews",
"prmedia_atrdnews", "presapp_track", "libcpre_self", "pid_self")]
# Name the columns in a better way.
colnames(ANESslected) <- c("Obama", "Gender", "Ethnicty", "Attention", "Internet", "TV",
"Newspaper", "Radio", "Direction", "Selfplacement", "PartyIdentity")
# Clean the data
# Recode gender and ethnicity as catagorical variables.
ANESslected[, c(2,3)] <- gsub(".", "", ANESslected[, c(2,3)])
?substr
ANESslected[, c(2,3)] <- gsub(substr(ANESslected[, c(2,3)], 1, 2), "", ANESslected[, c(2,3)])
ANES <- read.dta("anes_timeseries_2012_stata12.dta")
ANESslected <- ANES[ , c("ft_dpc", "gender_respondent_x", "dem_raceeth_x", "interest_attention",
"prmedia_atinews", "prmedia_attvnews", "prmedia_atpprnews",
"prmedia_atrdnews", "presapp_track", "libcpre_self", "pid_self")]
# Name the columns in a better way.
colnames(ANESslected) <- c("Obama", "Gender", "Ethnicty", "Attention", "Internet", "TV",
"Newspaper", "Radio", "Direction", "Selfplacement", "PartyIdentity")
# Clean the data
# Recode gender and ethnicity as catagorical variables.
ANESslected[, c(2,3)] <- gsub(substr(ANESslected[, c(2,3)], 1, 2), "", ANESslected[, c(2,3)])
substr(ANESslected[, c(2,3)], 1, 2)
substr(ANESslected[, c(2,3)], 1, 2)
ANESslected[ , c(4,8)] <- ifelse(substr(ANESslected[ , 8], 1, 1) == '1', 1,
ifelse(substr(ANESslected[ , 8], 1, 1) == '2', 2,
ifelse(substr(ANESslected[ , 8], 1, 1) == '3', 3,
ifelse(substr(ANESslected[ , 8], 1, 1) == '4', 4,
ifelse(substr(ANESslected[ , 8], 1, 1) == '5', 5, NA)))))
ANES <- read.dta("anes_timeseries_2012_stata12.dta")
ANESslected <- ANES[ , c("ft_dpc", "gender_respondent_x", "dem_raceeth_x", "interest_attention",
"prmedia_atinews", "prmedia_attvnews", "prmedia_atpprnews",
"prmedia_atrdnews", "presapp_track", "libcpre_self", "pid_self")]
# Name the columns in a better way.
colnames(ANESslected) <- c("Obama", "Gender", "Ethnicty", "Attention", "Internet", "TV",
"Newspaper", "Radio", "Direction", "Selfplacement", "PartyIdentity")
# Clean the data
# Recode the varible about political interest and media.
ANESslected[ , c(4,5,6,7,8)] <- ifelse(substr(ANESslected[ , c(4,5,6,7,8)], 1, 1) == '1', 1,
ifelse(substr(ANESslected[ , c(4,5,6,7,8)], 1, 1) == '2', 2,
ifelse(substr(ANESslected[ , c(4,5,6,7,8)], 1, 1) == '3', 3,
ifelse(substr(ANESslected[ , c(4,5,6,7,8)], 1, 1) == '4', 4,
ifelse(substr(ANESslected[ , c(4,5,6,7,8)], 1, 1) == '5', 5, NA)))))
# Randomly subset the data into two partitions.
ANES <- read.dta("anes_timeseries_2012_stata12.dta")
ANESslected <- ANES[ , c("ft_dpc", "gender_respondent_x", "dem_raceeth_x", "interest_attention",
"prmedia_atinews", "prmedia_attvnews", "prmedia_atpprnews",
"prmedia_atrdnews", "presapp_track", "libcpre_self", "pid_self")]
# Name the columns in a better way.
colnames(ANESslected) <- c("Obama", "Gender", "Ethnicty", "Attention", "Internet", "TV",
"Newspaper", "Radio", "Direction", "Selfplacement", "PartyIdentity")
ANESslected[ , c(4,5,6,7,8)] <- ifelse(substr(ANESslected[ , c(4,5,6,7,8)], 1, 1) == '1', 1,
ifelse(substr(ANESslected[ , c(4,5,6,7,8)], 1, 1) == '2', 2,
ifelse(substr(ANESslected[ , c(4,5,6,7,8)], 1, 1) == '3', 3,
ifelse(substr(ANESslected[ , c(4,5,6,7,8)], 1, 1) == '4', 4,
ifelse(substr(ANESslected[ , c(4,5,6,7,8)], 1, 1) == '5', 5, NA)))))?
?apply
?apply
for(i in c(4,5,6,7,8)){
ANESslected[ , i] <- ifelse(substr(ANESslected[ , i], 1, 1) == '1', 1,
ifelse(substr(ANESslected[ , i], 1, 1) == '2', 2,
ifelse(substr(ANESslected[ , i], 1, 1) == '3', 3,
ifelse(substr(ANESslected[ , i], 1, 1) == '4', 4,
ifelse(substr(ANESslected[ , i], 1, 1) == '5', 5, NA)))))
}
ANESslected[ , 10] <- ifelse(substr(ANESslected[ , 10], 1, 1) == '1', 1,
ifelse(substr(ANESslected[ , 10], 1, 1) == '2', 2,
ifelse(substr(ANESslected[ , 10], 1, 1) == '3', 3,
ifelse(substr(ANESslected[ , 10], 1, 1) == '4', 4,
ifelse(substr(ANESslected[ , 10], 1, 1) == '5', 5,
ifelse(substr(ANESslected[ , 10], 1, 1) == '6', 6,
ifelse(substr(ANESslected[ , 10], 1, 1) == '7', 7, NA)))))))
